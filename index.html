<!doctype html>
<html lang="pt-PT">

<head>
  <meta charset="utf-8" />

  <!-- Google Font: Rubik -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Rubik:wght@400;500;600;700;800;900&display=swap"
    rel="stylesheet">

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Cat√°logo Digital (Local)</title>

  <script>
    (function () {
      const l = document.createElement('link');
      l.rel = 'stylesheet';
      l.href = 'styles.css?v=' + Date.now();
      document.head.appendChild(l);
    })();
  </script>

  <!-- EmailJS -->
  <script src="https://cdn.jsdelivr.net/npm/emailjs-com@3/dist/email.min.js"></script>
  <script>emailjs.init("MZYyITH-LtcuLEhJg");</script>
</head>

<body>
  <header class="topbar">
    <div class="brand"><img src="assets/logo.svg" alt="CAT√ÅLOGO" class="brandLogo"></div>
    <nav class="crumbs" id="crumbs"></nav>
    <div class="topLinks">
      <a href="search.html" class="searchBtn" id="searchLink" title="Search" aria-label="Search">
        <span class="searchIcon" aria-hidden="true">üîé</span>
        <span class="searchText">Search</span>
      </a>

      <a href="client-area.html" class="clientBtn" id="clientAreaLink" title="Client area" aria-label="Client area">
        <span class="clientIcon" aria-hidden="true">
          <svg width="30" height="30" viewBox="0 0 24 24" aria-hidden="true" focusable="false">
            <path fill="currentColor" d="M12 0
          c-3.3 0-6 2.7-6 6.2
          C6 9.8 8.2 12 12 12
          c3.8 0 6-2.2 6-5.8
          C18 2.7 15.3 0 12 0Z" />
            <path fill="currentColor" d="M0 24
          c.3-5.5 4.8-9.5 8.7-10.6
          c1 .9 2.1 1.4 3.3 1.4
          s2.3-.5 3.3-1.4
          C19.2 14.5 23.7 18.5 24 24Z" />
          </svg>
        </span>
        <span class="clientText">Client area</span>
      </a>
    </div>
  </header>

  <main class="layout">
    <section class="left">
      <div class="svgShell" id="svgShell">
        <span id="panHint" class="panHint">
          Space + drag / wheel ¬∑ pan &amp; zoom
        </span>

        <div class="svgToolbar">
          <div class="zoomStack">
            <button id="btnZoomIn" class="iconBtn" title="Zoom +">üîç+</button>
            <button id="btnZoomReset" class="iconBtn" title="100%">100%</button>
            <button id="btnZoomOut" class="iconBtn" title="Zoom -">üîç‚àí</button>
          </div>
        </div>

        <div id="svgViewport" class="svgViewport">
          <object id="svgObj" type="image/svg+xml" data=""></object>
        </div>

        <div class="loading" id="svgLoading">Loading‚Ä¶</div>
        <div class="errBox" id="svgErr" style="display:none;"></div>
      </div>
    </section>

    <aside class="right">
      <div class="panel">
        <div class="panelTop">
          <div class="thumbWrap" id="thumbWrap"></div>

          <div class="selected">
            <div class="selectedTitle" id="selTitle">Please select a part or subassembly</div>
            <div class="meta">
              <div class="pn" id="selPn"></div>
              <div class="small" id="selQty"></div>
              <div class="small" id="selPrice"></div>
            </div>

            <div class="actions">
              <button class="btn" id="btnOpenSub" disabled>Open subassembly view</button>
              <div class="qtyBox">
                <button class="qtyBtn" id="qtyDown">‚àí</button>
                <input class="qtyInput" id="qtyInput" type="number" min="1" value="1" />
                <button class="qtyBtn" id="qtyUp">+</button>
                <div class="unit">UN</div>
              </div>
              <button class="btn primary" id="btnAdd" disabled>Add to cart</button>
            </div>
          </div>
        </div>

        <div class="cart">
          <div class="cartHeader">
            <div class="colPN">P/N</div>
            <div class="colDesc">Description</div>
            <div class="colPrice">Price</div>
            <div class="colQty">Qty</div>
            <div class="colRm"></div>
          </div>
          <div class="cartBody" id="cartBody"></div>

          <div class="cartFooter">
            <button class="btn big primary" id="btnSend">Review order request</button>
            <div class="hint">Please ensure that the desired part numbers and quantities are correct before submitting
              your request.</div>
          </div>
        </div>
      </div>
    </aside>
  </main>

  <div class="toast" id="toast" role="status" aria-live="polite"></div>

  <!-- ===== Review Order Modal (hidden by default) ===== -->
  <div id="orderModal" class="modalOverlay" hidden>
    <!-- este overlay serve para clicar fora e fechar -->
    <div class="modalBackdrop" data-close="1"></div>

    <div class="modalPanel" role="dialog" aria-modal="true" aria-labelledby="orderModalTitle">
      <div class="modalTop">
        <div class="panelTitle" id="orderModalTitle">Review order request</div>
      </div>

      <div class="modalBody">
        <!-- ‚Äúc√≥pia‚Äù do carrinho, mas maior -->
        <div class="cart cartModal">
          <div class="cartHeader">
            <div class="colPN">P/N</div>
            <div class="colDesc">Description</div>
            <div class="colPrice">Price</div>
            <div class="colQty">Qty</div>
            <div class="colRm"></div>
          </div>

          <div class="cartBody" id="cartBodyModal"></div>
        </div>
      </div>

      <div class="modalFooter">
        <button class="btn" id="btnModalClose" type="button">Back to catalogue</button>
        <button class="btn primary" id="btnModalSend" type="button">Send order request</button>
      </div>
    </div>
  </div>

  <script>
    const v = Date.now();
    const s = document.createElement('script');
    s.src = 'app.js?v=' + v;
    document.body.appendChild(s);
  </script>
</body>

</html>